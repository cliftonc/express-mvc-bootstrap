<h1>User</h1>
<script type="text/javascript">
	$(function(){

		// Delete User
		$('.button-delete').click(function(){
			
			var userId = this.id;
			
			$("#dialog-confirm" ).dialog({
				resizable: false,
				height:180,
				width:400,
				modal: true,
				buttons: {
					"Delete": function() {
						$( this ).dialog( "close" );
						$.ajax({
							   type: "DELETE",
							   url: "/user/" + userId,				   
							   success: function(msg) {				   	  
								  window.location.replace("/users");
							   },
							   error: function(msg) {					  
								  alert("I was unable to delete the user - something has gone wrong, apologies!");
							   }
						});
					},
					Cancel: function() {
						$( this ).dialog( "close" );
					}
				}
			});			
			
		});
		
	});
</script>
<div id="dialog-confirm" style="display: none;" title="Delete user?">
	<p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>
<%- partial('../messages') %>
<table>
	<tr>
  		<th>ID</th><td><%= user.id %></td>
  	</tr>
  	<tr>
  		<th>Name</th><td><%= user.name %></td>
  	</tr>
  	<tr>
  		<th>Email</th><td><%= user.email %></td>
  	</tr>  	
</table>
<a class="button-edit" href="<%= user.id %>/edit" title="Edit user ...">
	Edit 
</a>
<button class="button-delete" id="<%= user.id %>"  title="Delete user ...">
	Delete
</button>
<a class="button-home" href="/users" title="Home ...">
	Home
</a>
